<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.donkunny.mapper.MemberMapper">

	<!-- 회원가입 등록 -->
	<insert id="register">
		insert into tbl_temp_member (t_id, t_pwd, t_name, t_email, t_tel, t_birth)
		values(#{t_id}, #{t_pwd}, #{t_name}, #{t_email}, #{t_tel}, #{t_birth})
	</insert>

	<!-- 회원가입 승인(Subquery 이용) -->
	<insert id="confirmMember">
		insert into tbl_member(id, pwd, name, email, tel, birth, regdate)
		select t_id, t_pwd, t_name, t_email, t_tel, t_birth, t_regdate
		from tbl_temp_member
		where tno = #{tno}
	</insert>
	
	<!-- 대기명단에서 삭제 -->
	<delete id="deleteWatingMember">
		delete from tbl_temp_member
		where tno = #{tno}
	</delete>

	<!-- 로그인 시 사용자 정보 확인 -->
	<select id="confirmLogin" resultType="MemberVO" >
		select id, pwd, name
		from tbl_member
		where id = #{id} and pwd = #{pwd}
	</select>
	
	<!-- 회원정보 수정 -->
	<update id="updateMemberInfo">
		update tbl_member set id = #{id}, pwd = #{pwd}, name = #{name}, email = #{email},
		birth = #{birth}, tel = #{tel}
		where mno = #{mno}
	</update>
	
	<!-- 회원정보 삭제 -->
	<delete id="deleteMember">
		delete from tbl_member
		where mno = #{mno}
	</delete>
	
	<!-- 권한등급 변경 -->
	<update id="updateGrade">
		update tbl_member set grade = #{grade}
		where mno = #{mno}
	</update>
	
</mapper>